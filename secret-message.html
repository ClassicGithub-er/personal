<html>

<head>
    <meta charset="UTF-8">
    <title>Secret Message</title>
    <style>
        * {
            padding: 0;
            margin: 0;
            text-align: center;
            font-family: Cambria;
            box-sizing: border-box;
            color: antiquewhite;
            background: rgb(16, 16, 16);
        }

        h1 {
            font-size: 100px;
            font-weight: bold;
            transition: 750ms;
            display: inline-block;
            -webkit-text-stroke: 3px antiquewhite;
        }

        h1:hover {
            color: transparent;
        }

        .half {
            width: 50%;
            padding: 20px;
            box-sizing: border-box;
            border-right: 1px solid #ccc;
            overflow-y: auto;
        }

        .right {
            border-right: none;
        }

        textarea {
            width: 100%;
            height: 70px;
            text-align: left;
            margin-bottom: 10px;
            margin: 20px;
            font-family: inherit;
        }


        button {
            margin-bottom: 15px;
        }
    </style>
</head>

<body>


        <h1>Encoder</h1>

        <h3>Visible text</h3>
        <textarea id="enc_visible"></textarea>

        <h3>Secret message</h3>
        <textarea id="enc_secret"></textarea>

        <h3>Output (encoded)</h3>
        <textarea id="enc_output" readonly></textarea>
        <button id="enc_copy">Copy Output</button><br>
        





        <h1>Decoder</h1>

        <h3>Encoded input</h3>
        <textarea id="dec_input"></textarea>

        <h3>Decoded visible text</h3>
        <textarea id="dec_visible" readonly></textarea>

        <h3>Decoded secret text</h3>
        <textarea id="dec_secret" readonly></textarea>


    <script>
        // ------- TAG ENCODING -------
        // ASCII 0x20–0x7E → U+E0020–U+E007E
        function encodeToTags(text) {
            let out = "";
            for (let c of text) {
                let code = c.codePointAt(0);
                if (code >= 0x20 && code <= 0x7E)
                    out += String.fromCodePoint(0xE0000 + code);
                else
                    out += c; // fallback for non-ASCII
            }
            return out;
        }

        // TAG → ASCII decoding
        function decodeFromTags(text) {
            let visible = "";
            let secret = "";

            for (let char of text) {
                let cp = char.codePointAt(0);

                if (cp >= 0xE0020 && cp <= 0xE007E) {
                    // Secret message char
                    secret += String.fromCodePoint(cp - 0xE0000);
                } else {
                    // Normal visible char
                    visible += char;
                }
            }

            return { visible, secret };
        }


        // ----- ENCODER -----
        function updateEncoder() {
            const visible = document.getElementById("enc_visible").value;
            const secret = document.getElementById("enc_secret").value;

            document.getElementById("enc_output").value =
                visible + encodeToTags(secret);
        }

        document.getElementById("enc_visible").addEventListener("input", updateEncoder);
        document.getElementById("enc_secret").addEventListener("input", updateEncoder);

        document.getElementById("enc_copy").addEventListener("click", () => {
            const out = document.getElementById("enc_output");
            out.select();
            document.execCommand("copy");
            alert("Copied!");
        });

        updateEncoder();


        // ----- DECODER -----
        function updateDecoder() {
            const encoded = document.getElementById("dec_input").value;
            const { visible, secret } = decodeFromTags(encoded);

            document.getElementById("dec_visible").value = visible;
            document.getElementById("dec_secret").value = secret;
        }

        document.getElementById("dec_input").addEventListener("input", updateDecoder);

    </script>

</body>

</html>